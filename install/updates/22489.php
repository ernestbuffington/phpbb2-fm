<?php
	
if ( !defined('IN_PHPBB') )
{
	die("Hacking attempt");
}

//
// Modify phpBB core-schema
//
$sql = 'ALTER TABLE '. $table_prefix .'groups ADD COLUMN `group_rank_order` MEDIUMINT(8) default "0" NOT NULL';
_sql($sql, $errored, $error_ary);
$sql = 'ALTER TABLE '. $table_prefix .'groups ADD COLUMN `group_validate` TINYINT(1) default "1" NOT NULL';
_sql($sql, $errored, $error_ary);
$sql = 'ALTER TABLE '. $table_prefix .'ranks ADD COLUMN `rank_group` MEDIUMINT(8) NOT NULL';
_sql($sql, $errored, $error_ary);
$sql = 'ALTER TABLE '. $table_prefix .'sessions ADD COLUMN `is_robot` VARCHAR(255) DEFAULT "0" NOT NULL';
_sql($sql, $errored, $error_ary);
$sql = 'ALTER TABLE ' . $table_prefix . 'themes ADD COLUMN `botfontcolor` VARCHAR(6) DEFAULT "9E8DA7"';
_sql($sql, $errored, $error_ary);
$sql = 'ALTER TABLE '. $table_prefix .'users ADD COLUMN `user_lastpassword` VARCHAR(32) NULL';
_sql($sql, $errored, $error_ary);
$sql = 'ALTER TABLE '. $table_prefix .'users ADD COLUMN `user_lastpassword_time` INT(11) NULL';
_sql($sql, $errored, $error_ary);

$sql = 'DELETE FROM ' . $table_prefix . 'config WHERE `config_name` = "enable_custom_post_color"';
_sql($sql, $errored, $error_ary);

// phpbb_config data
$config_data = array( 
	'disable_topic_watching' => 1,
	'viewprofile_profilephoto' => 0,
	'bb_usage_stats_enable' => 0,
	'allow_medal_display_viewtopic' => 0,
	'allow_medal_display_viewprofile' => 0,
	'medal_display_row' => 1,
	'medal_display_col' => 1,
	'medal_display_width' => '',
	'medal_display_height' => '',
	'medal_display_order' => '',
	'gzip_level' => 9,
	'user_prune_notify' => 1,
	'enable_bot_tracking' => 0,
	'enable_bot_email' => 0,
	'enable_bots_whosonline' => 0,
	'auto_group_id' => 0,
	'index_groups' => 0,
	'password_update_days' => 0,
	'admin_auto_delete_days' => 999,
	'admin_auto_delete_days_inactive' => 999,
	'admin_auto_delete_inactive' => 0,
	'admin_auto_delete_non_visit' => 0,
	'admin_auto_delete_total' => 0,
	'admin_auto_delete_minutes' => 1440,
	'last_auto_delete_users_attempt' => 0,
	'admin_auto_delete_days_no_post' => 999,
	'admin_auto_delete_no_post' => 0,
	'mods_viewips' => 0
);
while ( list ( $config_name, $config_value ) = each ( $config_data ) )
{
	$sql = "INSERT INTO " . $table_prefix . "config (`config_name`, `config_value`) 
		VALUES ('" . $config_name . "', '" . $config_value . "')";
	_sql($sql, $errored, $error_ary);
}	


//
// Create new Fully Modded core-schema
//
$sql = 'DROP TABLE IF EXISTS ' . $table_prefix . 'bots';
_sql($sql, $errored, $error_ary);
$sql = 'CREATE TABLE ' . $table_prefix . 'bots (`bot_id` mediumint(8) UNSIGNED NOT NULL auto_increment, `bot_name` varchar(255) DEFAULT "" NOT NULL, `bot_agent` varchar(255) DEFAULT "" NOT NULL, `last_visit` varchar(255) NOT NULL, `bot_visits` mediumint(8) NOT NULL, `bot_pages` mediumint(8) NOT NULL, `pending_agent` text NOT NULL, `pending_ip` text NOT NULL, `bot_ip` text NOT NULL, `bot_style` mediumint(8) NOT NULL, PRIMARY KEY (`bot_id`)) TYPE=MyISAM';
_sql($sql, $errored, $error_ary);

$sql = 'DROP TABLE IF EXISTS ' . $table_prefix . 'bots_archive';
_sql($sql, $errored, $error_ary);
$sql = 'CREATE TABLE ' . $table_prefix . 'bots_archive (`bot_id` mediumint(8) NOT NULL auto_increment, `bot_name` VARCHAR(255), `bot_time` int(11) NOT NULL default "0", `bot_url` varchar(255) NOT NULL default "", PRIMARY KEY (`bot_id`)) TYPE=MyISAM';
_sql($sql, $errored, $error_ary);

$sql = 'DROP TABLE IF EXISTS '. $table_prefix .'ip';
_sql($sql, $errored, $error_ary);
$sql = 'CREATE TABLE '. $table_prefix .'ip (`id` mediumint(8) NOT NULL auto_increment, `ip` VARCHAR(200) DEFAULT "0" NOT NULL, `host` VARCHAR(200) DEFAULT "0" NOT NULL, `date` INT(11) DEFAULT "0" NOT NULL, `username` VARCHAR(200) DEFAULT "0" NOT NULL, `referrer` VARCHAR(200) DEFAULT "0" NOT NULL, `forum` VARCHAR(200) DEFAULT "0" NOT NULL, `browser` VARCHAR(200) DEFAULT "0" NOT NULL, KEY `username` (`username`), PRIMARY KEY (`id`)) TYPE=MYISAM';
_sql($sql, $errored, $error_ary);

$sql = 'DROP TABLE IF EXISTS ' . $table_prefix . 'medal';
_sql($sql, $errored, $error_ary);
$sql = 'CREATE TABLE ' . $table_prefix . 'medal (`medal_id` mediumint(8) UNSIGNED NOT NULL auto_increment, `cat_id` mediumint(8) UNSIGNED NOT NULL default "1", `medal_name` varchar(40) NOT NULL, `medal_description` varchar(255) NOT NULL, `medal_image` varchar(40) NULL, PRIMARY KEY (`medal_id`)) TYPE=MyISAM';
_sql($sql, $errored, $error_ary);

$sql = 'DROP TABLE IF EXISTS ' . $table_prefix . 'medal_cat';
_sql($sql, $errored, $error_ary);
$sql = 'CREATE TABLE ' . $table_prefix . 'medal_cat (`cat_id` mediumint(8) UNSIGNED NOT NULL auto_increment, `cat_title` varchar(100) NOT NULL, `cat_order` mediumint(8) UNSIGNED NOT NULL default "0", PRIMARY KEY (`cat_id`), KEY `cat_order` (`cat_order`)) TYPE=MyISAM';
_sql($sql, $errored, $error_ary);

$sql = 'DROP TABLE IF EXISTS ' . $table_prefix . 'medal_mod';
_sql($sql, $errored, $error_ary);
$sql = 'CREATE TABLE ' . $table_prefix . 'medal_mod (`mod_id` mediumint(8) UNSIGNED NOT NULL auto_increment, `medal_id` mediumint(8) UNSIGNED NOT NULL, `user_id` mediumint(8) UNSIGNED NOT NULL, PRIMARY KEY (`mod_id`)) TYPE=MyISAM';
_sql($sql, $errored, $error_ary);

$sql = 'DROP TABLE IF EXISTS ' . $table_prefix . 'medal_user';
_sql($sql, $errored, $error_ary);
$sql = 'CREATE TABLE ' . $table_prefix . 'medal_user (`issue_id` mediumint(8) UNSIGNED NOT NULL auto_increment, `medal_id` mediumint(8) UNSIGNED NOT NULL, `user_id` mediumint(8) UNSIGNED NOT NULL, `issue_reason` varchar(255) NOT NULL, `issue_time` int(11) NOT NULL, PRIMARY KEY (`issue_id`)) TYPE=MyISAM';
_sql($sql, $errored, $error_ary);
	
//
// Modify Fully Modded core-data
//
// phpbb_config_nav data
$sql = "INSERT INTO " . $table_prefix . "config_nav (`img`, `alt`, `use_lang`, `url`, `nav_order`, `value`) VALUES ('icon_medals.gif', 'Medals', '1', 'medals.php', '1000', '0')";
_sql($sql, $errored, $error_ary);

$sql = 'DELETE FROM ' . $table_prefix . 'config_nav WHERE `url` = "search.php"';
_sql($sql, $errored, $error_ary);

// phpbb_bots data
$bots_data = array( 
	array( NAME => 'Alexa [Bot]', AGENT => 'ia_archiver', IP => '66.28.250.|209.237.238.' ),
	array( NAME => 'Infoseek [Bot]', AGENT => 'Infoseek', IP => '195.145.119.24|195.145.119.25|198.5.208|198.5.210|202.33.250.146|202.33.250.147|202.33.250.148|202.33.250.149|202.33.250.150|202.33.250.151|202.33.250.152|202.33.250.153|202.33.250.154|204.162.96|204.162.97.1|204.162.97.152|204.162.97.17|204.162.97.2|204.162.97.205|204.162.97.228|204.162.97.231|204.162.97.3|204.162.97.32|204.162.98.11|204.162.98.12|204.162.98.124|204.162.98.126|204.162.98.151|204.162.98.161|204.162.98.168|204.162.98.18|204.162.98.192|204.162.98.2|204.162.98.237|204.162.98.27|204.162.98.3|204.162.98.36|204.162.98.38|204.162.98.4|204.162.98.45|204.162.98.48|204.162.98.49|204.162.98.5|204.162.98.6|204.162.98.7|204.162.98.8|204.162.98.80|204.162.98.88|204.162.98.9|204.162.98.91|204.162.98.98|204.202.132.19|205.226.201|205.226.203.186|205.226.203.35|205.226.203.56|205.226.203.62|205.226.|204.238|206.3.30.196|206.3.30.250|206.3.30.251|210.148.160.157|210.148.160.163|210.148.160.165|210.148.160.206|210.155.157|210.155.159|210.236.233.130|210.236.233.131|210.236.233.132|210.236.233.133|210.236.233.135|210.236.233.136|210.236.233.137|210.236.233.139|210.236.233.150|210.236.233.151|210.236.233.155|210.236.233.160|210.236.233.161|211.13.222.230|211.18.214.194|212.185.44.10|212.185.44.11|212.185.44.12|212.185.44.15' ),
	array( NAME => 'Alta Vista [Bot]', AGENT => 'Scooter', IP => '128.177.243|128.177.244.100|128.177.244.86|194.112.94.250|194.112.94.251|194.112.94.252|194.201.146.1|194.201.146.24|194.221.84.11|194.221.84.15|194.221.84.31|194.221.84.32|194.221.84.33|194.221.84.34|194.221.84.38|194.221.84.39|194.221.84.40|194.221.84.41|194.51.33.72|204.123.13.36|204.123.13.65|204.123.13.66|204.123.2|204.123.28.10|204.123.28.11|204.123.28.20|204.123.28.21|204.123.28.27|204.123.28.30|204.123.28.31|204.123.28.32|204.123.28.33|204.123.9|204.152.190|204.152.191|205.229.83.18|208.185.243.148|208.221.32|208.221.35.200|208.221.35.201|208.221.35.202|208.221.35.203|208.221.35.204|208.221.35.205|208.221.35.206|208.221.35.207|209.247.40.246|209.73.160.1|209.73.160.250|209.73.160.254|209.73.162|209.73.164|209.73.174.250|209.73.174.251|209.73.180|212.187.213.171|212.187.213.172|212.187.213.173|212.187.213.174|212.187.213.175|212.187.226|212.187.226.42|212.187.226.83|212.187.226.84|212.187.226.85|212.187.226.87|212.187.226.88|212.187.226.93|212.187.226.99|212.187.227|216.39.48|216.39.50|216.39.51|216.198.200.119|64.152.75|66.17.148.128|66.17.148.129|66.17.148.130|66.17.148.131|66.17.148.132|66.17.148.133|66.17.148.134|66.17.148.135|66.17.148.136|66.17.148.137|66.17.148.138|66.17.148.139|66.17.148.140|66.17.148.141|66.17.148.142|66.17.148.143|66.17.148.144|66.17.148.145|66.17.148.146|66.17.148.147|66.17.148.148|66.17.148.149|66.17.148.150|66.17.148.151|66.17.148.152|66.17.148.153|66.17.148.154|66.17.148.155|66.17.148.156|66.17.148.157|66.17.148.158|66.17.148.159|66.17.148.160|66.17.148.161|66.17.148.162|66.17.148.163|66.17.148.164|66.17.148.165|66.17.148.166|66.17.148.167|66.17.148.168|66.17.148.169|66.17.148.170|66.17.148.171|66.17.148.172|66.17.148.173|66.17.148.174|66.17.148.175|66.17.148.176|66.17.148.177|66.17.148.178|66.17.148.179|66.17.148.180|66.17.148.181|66.17.148.182|66.17.148.183|66.17.148.184|66.17.148.185|66.17.148.186|66.17.148.187|66.17.148.188|66.17.148.189|66.17.148.190|66.17.148.191|66.163.170.193' ),
	array( NAME => 'Lycos [Bot]', AGENT => 'Lycos', IP => '166.48.225.254|202.232.118.40|202.232.118.51|206.79.171|207.77.90|207.77.91.184|208.146.26|208.146.27.123|208.146.27.124|208.146.27.57|208.146.27.58|208.146.27.59|208.146.27.60|208.146.27.62|208.146.27.89|208.146.27.90|208.146.27.91|208.146.27.92|208.146.27.93|208.146.27.94|208.146.27.95|208.146.27.96|209.202.192|209.202.192.147|209.202.193|209.202.194.237|209.202.194.238|209.202.205.1|209.202.240.109|209.202.240.8|209.202.248.211|209.202.248.212|209.202.248.213|209.202.248.214|209.67.228|209.67.229|211.51.63.4|213.193.19.35|64.89.33' ),
	array( NAME => 'FAST [Crawler]', AGENT => 'alltheweb', IP => '146.101.142.2|216.35.112.|64.41.254.2|213.188.8.' ),
	array( NAME => 'WiseNut [Bot]', AGENT => 'WISEnut', IP => '64.241.243.123|64.241.242.177|64.241.243.65|64.241.243.124|64.242.88.10|64.242.88.50|64.242.88.60|65.116.145.141|65.113.96.174|65.116.145|66.35.208.59|66.35.208.60|66.35.208.112|66.35.208.158|66.35.208.160|66.35.208.206|66.35.208.210|66.35.208.211|208.232.154.64|209.249.66.10|209.249.66.26|209.249.66.36|209.249.67.101|209.249.67.102|209.249.67.103|209.249.67.104|209.249.67.105|209.249.67.106|209.249.67.107|209.249.67.108|209.249.67.109|209.249.67.110|209.249.67.111|209.249.67.112|209.249.67.113|209.249.67.114|209.249.67.115|209.249.67.116|209.249.67.117|209.249.67.118|209.249.67.119|209.249.67.120|209.249.67.121|209.249.67.122|209.249.67.125|209.249.67.126|209.249.67.127|209.249.67.128|209.249.67.129|209.249.67.130|209.249.67.131|209.249.67.132|209.249.67.133|209.249.67.134|209.249.67.135|209.249.67.136|209.249.67.137|209.249.67.138|209.249.67.139|209.249.67.140|209.249.67.141|209.249.67.142|209.249.67.143|209.249.67.144|210.109.141.5|216.34.42.12|216.34.42.14|216.34.42.36|216.34.42.38|216.34.42.42|216.34.42.47|216.34.42.54|216.34.42.55|216.34.42.56|216.34.42.57|216.34.42.59|216.34.42.110|216.34.42.111|216.34.42.112|216.34.42.113|216.34.42.114|216.34.42.115|216.34.42.116|216.34.42.117|216.34.42.171|216.34.42.172|216.34.42.173|216.34.42.176|216.34.42.210|216.34.42.211|216.34.42.212|216.34.42.213|216.34.42.214|216.34.42.215|216.34.42.216|216.34.42.217|216.88.158.142' ),
	array( NAME => 'MSN [Bot]', AGENT => 'msnbot/', IP => '131.107.3.|204.95.98.|131.107.1|65.54.164.95|65.54.188.57|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|65.54.188.93|207.46.98.40|207.46.98.129|65.54.164.69|207.46.98.38|207.46.98.109|207.46.98.38|207.46.98.38|65.54.188.127|65.54.188.61' ),
	array( NAME => 'Looksmart [Bot]', AGENT => 'MARTINI', IP => '64.241.242.|207.138.42.212' ),
	array( NAME => 'Ask Jeeves [Bot]', AGENT => 'Ask Jeeves', IP => '140.239.126.13|140.239.251.220|140.239.251.221|140.239.251.222|140.239.251.223|140.239.251.224|140.239.251.230|207.204.132.233|207.204.132.234|208.178.104.55|209.67.252.197|209.67.252.199|209.67.252.211|209.67.252.212|209.67.252.213|209.67.252.214|209.67.252.215|209.67.252.216|210.51.25.142|211.13.230.249|216.143.191.131|216.200.130.20|216.200.130.200|216.200.130.201|216.200.130.202|216.200.130.203|216.200.130.204|216.200.130.205|216.200.130.206|216.200.130.207|216.200.130.208|216.200.130.209|216.200.130.210|216.200.130.242|216.200.130.244|216.200.130.245|216.200.130.246|216.200.130.248|216.200.130.249|216.200.130.26|216.200.130.77|216.200.130.78|216.200.130.79|216.200.130.85|216.200.130.86|216.200.130.87|216.200.130.88|216.200.130.89|216.34.121.100|216.34.121.18|216.34.121.19|216.34.121.31|216.34.121.32|216.34.121.33|216.34.121.34|216.34.121.67|216.34.121.68|63.236.92.143|63.236.92.144|63.236.92.145|63.236.92.146|63.236.92.147|63.236.92.148|63.236.92.149|63.236.92.150|63.236.92.151|63.236.92.152|63.236.92.153|64.55.148.3|64.55.148.37|64.55.148.38|64.55.148.39|64.55.148.4|64.55.148.43|64.55.148.44|64.55.148.45|64.55.148.5|64.55.148.50|64.55.148.51|64.55.148.52|64.55.148.53|64.55.148.54|65.192.195.0|65.192.195.1|65.192.195.10|65.192.195.11|65.192.195.12|65.192.195.13|65.192.195.14|65.192.195.15|65.192.195.16|65.192.195.17|65.192.195.18|65.192.195.19|65.192.195.2|65.192.195.20|65.192.195.21|65.192.195.22|65.192.195.23|65.192.195.24|65.192.195.25|65.192.195.26|65.192.195.27|65.192.195.28|65.192.195.29|65.192.195.3|65.192.195.30|65.192.195.31|65.192.195.4|65.192.195.5|65.192.195.6|65.192.195.7|65.192.195.8|65.192.195.9|65.214.32.128|65.214.32.129|65.214.32.130|65.214.32.131|65.214.32.132|65.214.32.133|65.214.32.134|65.214.32.135|65.214.32.136|65.214.32.137|65.214.32.138|65.214.32.139|65.214.32.140|65.214.32.141|65.214.32.142|65.214.32.143|65.214.32.144|65.214.32.145|65.214.32.146|65.214.32.147|65.214.32.148|65.214.32.149|65.214.32.150|65.214.32.151|65.214.32.152|65.214.32.153|65.214.32.154|65.214.32.155|65.214.32.156|65.214.32.157|65.214.32.158|65.214.32.159|65.214.32.160|65.214.32.161|65.214.32.162|65.214.32.163|65.214.32.164|65.214.32.165|65.214.32.166|65.214.32.167|65.214.32.168|65.214.32.169|65.214.32.170|65.214.32.171|65.214.32.172|65.214.32.173|65.214.32.174|65.214.32.175|65.214.32.176|65.214.32.177|65.214.32.178|65.214.32.179|65.214.32.180|65.214.32.181|65.214.32.182|65.214.32.183|65.214.32.184|65.214.32.185|65.214.32.186|65.214.32.187|65.214.32.188|65.214.32.189|65.214.32.190|65.214.32.191|65.214.32.192|65.214.32.193|65.214.32.194|65.214.32.195|65.214.32.196|65.214.32.197|65.214.32.198|65.214.32.199|65.214.32.200|65.214.32.201|65.214.32.202|65.214.32.203|65.214.32.204|65.214.32.205|65.214.32.206|65.214.32.207|65.214.32.208|65.214.32.209|65.214.32.210|65.214.32.211|65.214.32.212|65.214.32.213|65.214.32.214|65.214.32.215|65.214.32.216|65.214.32.217|65.214.32.218|65.214.32.219|65.214.32.220|65.214.32.221|65.214.32.222|65.214.32.223|65.214.32.224|65.214.32.225|65.214.32.226|65.214.32.227|65.214.32.228|65.214.32.229|65.214.32.230|65.214.32.231|65.214.32.232|65.214.32.233|65.214.32.234|65.214.32.235|65.214.32.236|65.214.32.237|65.214.32.238|65.214.32.239|65.214.32.240|65.214.32.241|65.214.32.242|65.214.32.243|65.214.32.244|65.214.32.245|65.214.32.246|65.214.32.247|65.214.32.248|65.214.32.249|65.214.32.250|65.214.32.251|65.214.32.252|65.214.32.253|65.214.32.254|65.214.32.255|65.214.36|65.214.38|65.214.44|65.214.45.0|65.214.45.1|65.214.45.10|65.214.45.100|65.214.45.11|65.214.45.12|65.214.45.13|65.214.45.14|65.214.45.15|65.214.45.16|65.214.45.17|65.214.45.18|65.214.45.19|65.214.45.2|65.214.45.20|65.214.45.21|65.214.45.22|65.214.45.23|65.214.45.24|65.214.45.25|65.214.45.26|65.214.45.27|65.214.45.28|65.214.45.29|65.214.45.3|65.214.45.30|65.214.45.31|65.214.45.32|65.214.45.33|65.214.45.34|65.214.45.35|65.214.45.36|65.214.45.37|65.214.45.38|65.214.45.39|65.214.45.4|65.214.45.40|65.214.45.41|65.214.45.42|65.214.45.43|65.214.45.44|65.214.45.45|65.214.45.46|65.214.45.47|65.214.45.48|65.214.45.49|65.214.45.5|65.214.45.50|65.214.45.51|65.214.45.6|65.214.45.7|65.214.45.8|65.214.45.9' ),
	array( NAME => 'Gigabot [Bot]', AGENT => 'Gigabot', IP => '64.62.142.231|64.62.142.233|64.62.142.235|64.62.142.237|64.62.142.239|64.62.142.241|64.62.142.243|64.62.142.245|64.62.168.0|64.62.168.1|64.62.168.2|64.62.168.3|64.62.168.4|64.62.168.5|64.62.168.6|64.62.168.7|64.62.168.8|64.62.168.9|64.62.168.10|64.62.168.11|64.62.168.12|64.62.168.13|64.62.168.14|64.62.168.15|64.62.168.16|64.62.168.17|64.62.168.18|64.62.168.19|64.62.168.20|64.62.168.21|64.62.168.22|64.62.168.23|64.62.168.24|64.62.168.25|64.62.168.26|64.62.168.27|64.62.168.28|64.62.168.29|64.62.168.30|64.62.168.31|64.62.168.32|64.62.168.33|64.62.168.34|64.62.168.35|64.62.168.36|64.62.168.37|64.62.168.38|64.62.168.39|64.62.168.40|64.62.168.41|64.62.168.42|64.62.168.43|64.62.168.44|64.62.168.45|64.62.168.46|64.62.168.47|64.62.168.48|64.62.168.49|64.62.168.50|64.62.168.51|64.62.168.52|64.62.168.53|64.62.168.54|64.62.168.55|64.62.168.56|64.62.168.57|64.62.168.58|64.62.168.59|64.62.168.60|64.62.168.61|64.62.168.62|64.62.168.63|64.62.168.64|64.62.168.65|64.62.168.66|64.62.168.67|64.62.168.68|64.62.168.69|64.62.168.70|64.62.168.71|64.62.168.72|64.62.168.73|64.62.168.74|64.62.168.75|64.62.168.76|64.62.168.77|64.62.168.78|64.62.168.79|64.62.168.80|64.62.168.81|64.62.168.82|64.62.168.83|64.62.168.84|64.62.168.85|64.62.168.86|64.62.168.87|64.62.168.88|64.62.168.89|64.62.168.90|64.62.168.91|64.62.168.92|64.62.168.93|64.62.168.94|64.62.168.95|64.62.168.96|64.62.168.97|64.62.168.98|64.62.168.99|64.62.168.100|64.62.168.101|64.62.168.102|64.62.168.103|64.62.168.104|64.62.168.105|64.62.168.106|64.62.168.107|64.62.168.108|64.62.168.109|64.62.168.110|64.62.168.111|64.62.168.112|64.62.168.113|64.62.168.114|64.62.168.115|64.62.168.116|64.62.168.117|64.62.168.118|64.62.168.119|64.62.168.120|64.62.168.121|64.62.168.122|64.62.168.123|64.62.168.124|64.62.168.125|64.62.168.126|64.62.168.127|64.139.94.202|64.211.63.145|64.211.63.146|66.154.102|66.154.103|207.114.174.1|207.114.174.2|207.114.174.3|207.114.174.6|207.114.174.5|207.114.174.7|207.114.174.8|207.114.174.9|207.114.174.10|207.114.174.11|207.114.174.12|207.114.174.13|207.114.174.14|207.114.174.15|207.114.174.16|207.114.174.17|207.114.174.18|207.114.174.19|207.114.174.20|207.114.174.21|207.114.174.22|207.114.174.23|207.114.174.24|207.114.174.25|207.114.174.26|208.254.87.133|216.243.113.1|216.243.113.81|216.243.113.82|216.243.113.83|216.243.113.84|216.243.113.86|216.243.113.87|217.75.103.130' ),
	array( NAME => 'Yahoo Slurp [Bot]', AGENT => 'Yahoo', IP => '216.35.116.|66.196.|66.94.230.|202.212.5.|141.185.209|169.207.238|199.177.18.9|202.160.178|202.160.179|202.160.180|202.160.183.182|202.160.183.217|202.160.183.218|202.160.183.219|202.160.183.220|202.160.183.235|202.160.183.239|202.160.183.245|202.165.98|202.165.99|202.212.5.30|202.212.5.32|202.212.5.33|202.212.5.34|202.212.5.35|202.212.5.36|202.212.5.37|202.212.5.38|202.212.5.39|202.212.5.47|202.212.5.48|202.46.19.93|203.123.188.2|203.141.52.41|203.141.52.42|203.141.52.43|203.141.52.44|203.141.52.45|203.141.52.46|203.141.52.47|203.255.234.102|203.255.234.103|203.255.234.105|203.255.234.106|206.190.43.125|206.190.43.81|207.126.239.224|209.1.12|209.1.13.101|209.1.13.231|209.1.13.232|209.1.32.122|209.1.38|209.131.40|209.131.41|209.131.48|209.131.49.37|209.131.50.153|209.131.51.166|209.131.60.169|209.131.60.170|209.131.60.171|209.131.60.19|209.131.62.107|209.131.62.108|209.131.62.109|209.131.62.214|209.185.122|209.185.141|209.185.143|209.191.64.227|209.191.65|209.191.65.249|209.191.65.82|209.191.82.245|209.191.83|209.191.83.220|209.191.87.214|209.191.87.215|209.191.87.216|209.191.87.217|209.191.87.218|209.191.87.219|209.191.87.220|209.191.87.221|209.191.87.222|209.191.87.223|209.67.206.126|209.67.206.127|209.67.206.133|209.73.176.128|209.73.176.129|209.73.176.133|209.73.176.134|209.73.176.136|211.14.8.240|211.169.241.21|213.216.143.37|213.216.143.38|213.216.143.39|216.109.121.70|216.109.121.71|216.109.126.131|216.109.126.133|216.109.126.137|216.109.126.138|216.109.126.139|216.109.126.141|216.109.126.143|216.109.126.145|216.109.126.146|216.109.126.147|216.109.126.150|216.109.126.152|216.109.126.157|216.109.126.158|216.109.126.159|216.109.126.160|216.109.126.161|216.136.233.164|216.145.58.219|216.155.198.60|216.155.200|216.155.202.54|216.155.204.40|216.198.200.123|216.239.193.71|216.239.193.72|216.239.193.73|216.239.193.74|216.239.193.75|216.239.193.76|216.239.193.77|216.239.193.78|216.239.193.79|216.239.193.80|216.239.193.81|216.239.193.82|216.239.193.83|216.239.193.84|216.239.193.85|216.239.193.86|216.32.237.1|216.32.237.10|216.32.237.11|216.32.237.12|216.32.237.13|216.32.237.14|216.32.237.15|216.32.237.16|216.32.237.17|216.32.237.18|216.32.237.19|216.32.237.20|216.32.237.21|216.32.237.22|216.32.237.23|216.32.237.24|216.32.237.25|216.32.237.26|216.32.237.27|216.32.237.28|216.32.237.29|216.32.237.30|216.32.237.7|216.32.237.8|216.32.237.9|62.1|72.199.20|62.1|72.199.21|62.1|72.199.22|62.1|72.199.23|62.1|72.199.24|62.27.59.245|63.163.102.180|63.163.102.181|63.163.102.182|64.157.137.219|64.157.137.220|64.157.137.221|64.157.137.225|64.157.138.103|64.157.138.108|64.75.36.42|64.75.36.43|64.75.36.44|64.75.36.45|64.75.36.47|64.75.36.77|64.75.36.79|64.75.36.80|66.163.170.157|66.163.170.159|66.163.170.161|66.163.170.162|66.163.170.166|66.163.170.167|66.163.170.170|66.163.170.172|66.163.170.176|66.163.170.178|66.163.170.179|66.163.170.180|66.163.170.184|66.163.170.185|66.163.170.190|66.163.170.192|66.163.174.65|66.196.101|66.196.65|66.196.67.100|66.196.67.101|66.196.67.102|66.196.67.103|66.196.67.104|66.196.67.105|66.196.67.106|66.196.67.107|66.196.67.108|66.196.67.109|66.196.67.110|66.196.67.111|66.196.67.112|66.196.67.113|66.196.67.114|66.196.67.115|66.196.67.116|66.196.67.117|66.196.67.118|66.196.67.119|66.196.67.120|66.196.67.121|66.196.67.122|66.196.67.123|66.196.67.124|66.196.67.125|66.196.67.126|66.196.67.127|66.196.67.128|66.196.67.129|66.196.67.130|66.196.67.150|66.196.67.151|66.196.67.176|66.196.67.177|66.196.67.178|66.196.67.200|66.196.67.201|66.196.67.202|66.196.67.203|66.196.67.204|66.196.67.205|66.196.67.206|66.196.67.207|66.196.67.208|66.196.67.209|66.196.67.210|66.196.67.211|66.196.67.212|66.196.67.213|66.196.67.214|66.196.67.215|66.196.67.216|66.196.67.217|66.196.67.218|66.196.67.219|66.196.67.220|66.196.67.221|66.196.67.222|66.196.67.223|66.196.67.224|66.196.67.225|66.196.67.226|66.196.67.227|66.196.67.228|66.196.67.229|66.196.67.230|66.196.67.231|66.196.67.232|66.196.67.233|66.196.67.234|66.196.67.235|66.196.67.236|66.196.67.237|66.196.67.238|66.196.67.239|66.196.67.240|66.196.67.254|66.196.67.30|66.196.67.31|66.196.67.32|66.196.67.33|66.196.67.34|66.196.67.35|66.196.67.36|66.196.67.37|66.196.67.38|66.196.67.39|66.196.67.70|66.196.67.71|66.196.67.72|66.196.67.73|66.196.67.74|66.196.67.75|66.196.67.76|66.196.67.77|66.196.67.78|66.196.67.79|66.196.67.80|66.196.67.94|66.196.67.95|66.196.67.96|66.196.67.97|66.196.67.98|66.196.67.99|66.196.72|66.196.73|66.196.74|66.196.77|66.196.78|66.196.80|66.196.81.10|66.196.81.102|66.196.81.103|66.196.81.104|66.196.81.105|66.196.81.106|66.196.81.107|66.196.81.108|66.196.81.109|66.196.81.11|66.196.81.110|66.196.81.111|66.196.81.112|66.196.81.113|66.196.81.114|66.196.81.115|66.196.81.116|66.196.81.117|66.196.81.118|66.196.81.119|66.196.81.12|66.196.81.120|66.196.81.121|66.196.81.122|66.196.81.123|66.196.81.124|66.196.81.125|66.196.81.126|66.196.81.127|66.196.81.128|66.196.81.129|66.196.81.13|66.196.81.130|66.196.81.131|66.196.81.132|66.196.81.133|66.196.81.134|66.196.81.135|66.196.81.136|66.196.81.137|66.196.81.138|66.196.81.139|66.196.81.14|66.196.81.140|66.196.81.141|66.196.81.142|66.196.81.143|66.196.81.144|66.196.81.145|66.196.81.146|66.196.81.147|66.196.81.148|66.196.81.149|66.196.81.15|66.196.81.150|66.196.81.151|66.196.81.152|66.196.81.153|66.196.81.154|66.196.81.155|66.196.81.156|66.196.81.157|66.196.81.158|66.196.81.159|66.196.81.16|66.196.81.160|66.196.81.161|66.196.81.162|66.196.81.163|66.196.81.164|66.196.81.165|66.196.81.166|66.196.81.167|66.196.81.168|66.196.81.169|66.196.81.17|66.196.81.170|66.196.81.171|66.196.81.172|66.196.81.173|66.196.81.174|66.196.81.175|66.196.81.176|66.196.81.177|66.196.81.178|66.196.81.179|66.196.81.18|66.196.81.180|66.196.81.181|66.196.81.182|66.196.81.183|66.196.81.184|66.196.81.185|66.196.81.187|66.196.81.188|66.196.81.189|66.196.81.19|66.196.81.190|66.196.81.191|66.196.81.192|66.196.81.193|66.196.81.194|66.196.81.195|66.196.81.196|66.196.81.197|66.196.81.198|66.196.81.199|66.196.81.20|66.196.81.200|66.196.81.201|66.196.81.202|66.196.81.203|66.196.81.204|66.196.81.205|66.196.81.206|66.196.81.207|66.196.81.208|66.196.81.209|66.196.81.21|66.196.81.210|66.196.81.211|66.196.81.212|66.196.81.213|66.196.81.214|66.196.81.215|66.196.81.216|66.196.81.217|66.196.81.218|66.196.81.219|66.196.81.22|66.196.81.23|66.196.81.86|66.196.81.87|66.196.81.88|66.196.81.93|66.196.81.94|66.196.81.95|66.196.81.96|66.196.90|66.196.91|66.196.92|66.196.93.19|66.196.93.24|66.196.93.6|66.196.93.7|66.196.97|66.196.99.20|66.218.65.52|66.218.70|66.228.164|66.228.165|66.228.182.177|66.228.182.183|66.228.182.185|66.228.182.187|66.228.182.188|66.228.182.190|66.94.230.100|66.94.230.101|66.94.230.102|66.94.230.103|66.94.230.104|66.94.230.105|66.94.230.106|66.94.230.107|66.94.230.108|66.94.230.109|66.94.230.110|66.94.230.160|66.94.230.161|66.94.230.162|66.94.230.163|66.94.230.96|66.94.230.97|66.94.230.98|66.94.230.99|66.94.232|66.94.233|66.94.238.51|68.142.195.80|68.142.195.81|68.142.203.133|68.142.230.125|68.142.230.126|68.142.230.127|68.142.230.128|68.142.230.129|68.142.230.130|68.142.230.131|68.142.230.132|68.142.230.133|68.142.230.134|68.142.230.135|68.142.230.136|68.142.230.137|68.142.230.138|68.142.230.139|68.142.230.140|68.142.230.141|68.142.230.142|68.142.230.143|68.142.230.144|68.142.230.145|68.142.230.146|68.142.230.147|68.142.230.148|68.142.230.149|68.142.230.150|68.142.230.151|68.142.230.152|68.142.230.153|68.142.230.154|68.142.230.155|68.142.230.156|68.142.230.157|68.142.230.158|68.142.230.159|68.142.230.160|68.142.230.161|68.142.230.162|68.142.230.163|68.142.230.164|68.142.230.165|68.142.230.166|68.142.230.167|68.142.230.168|68.142.230.169|68.142.230.174|68.142.230.175|68.142.230.176|68.142.230.177|68.142.230.178|68.142.230.179|68.142.230.180|68.142.230.181|68.142.230.182|68.142.230.183|68.142.230.184|68.142.230.185|68.142.230.186|68.142.230.187|68.142.230.188|68.142.230.189|68.142.230.190|68.142.230.191|68.142.230.192|68.142.230.193|68.142.230.194|68.142.230.195|68.142.230.196|68.142.230.197|68.142.230.198|68.142.230.199|68.142.230.200|68.142.230.201|68.142.230.202|68.142.230.203|68.142.230.204|68.142.230.205|68.142.230.206|68.142.230.207|68.142.230.208|68.142.230.209|68.142.230.210|68.142.230.211|68.142.230.212|68.142.230.213|68.142.230.214|68.142.230.215|68.142.230.216|68.142.230.217|68.142.230.240|68.142.230.247|68.142.230.248|68.142.230.249|68.142.230.250|68.142.230.251|68.142.230.252|68.142.230.253|68.142.230.254|68.142.230.32|68.142.230.33|68.142.230.34|68.142.230.35|68.142.230.36|68.142.230.37|68.142.230.38|68.142.230.39|68.142.230.40|68.142.230.41|68.142.230.43|68.142.230.44|68.142.230.45|68.142.230.46|68.142.230.47|68.142.230.48|68.142.230.49|68.142.231.49|68.142.246|68.142.249|68.142.250|68.142.251|72.30.101|72.30.102|72.30.103|72.30.104|72.30.107|72.30.110|72.30.111|72.30.128|72.30.129|72.30.131|72.30.132|72.30.133|72.30.134|72.30.135|72.30.142.24|72.30.142.25|72.30.177|72.30.214|72.30.216|72.30.221|72.30.54|72.30.56|72.30.60|72.30.61|72.30.81|72.30.87|72.30.9|72.30.97|72.30.98|72.30.99' ),
	array( NAME => 'Googlebot [Bot]', AGENT => 'Google', IP => '209.185.108|209.185.253|216.239.33.96|216.239.33.97|216.239.33.98|216.239.33.99|216.239.37.98|216.239.37.99|216.239.39.98|216.239.39.99|216.239.41.96|216.239.41.97|216.239.41.98|216.239.41.99|216.239.45.4|216.239.46|216.239.51.96|216.239.51.97|216.239.51.98|216.239.51.99|216.239.53.98|216.239.53.99|216.239.57.96|216.239.57.97|216.239.57.98|216.239.57.99|216.239.59.98|216.239.59.99|216.33.229.163|64.233.173.193|64.233.173.194|64.233.173.195|64.233.173.196|64.233.173.197|64.233.173.198|64.233.173.199|64.233.173.200|64.233.173.201|64.233.173.202|64.233.173.203|64.233.173.204|64.233.173.205|64.233.173.206|64.233.173.207|64.233.173.208|64.233.173.209|64.233.173.210|64.233.173.211|64.233.173.212|64.233.173.213|64.233.173.214|64.233.173.215|64.233.173.216|64.233.173.217|64.233.173.218|64.233.173.219|64.233.173.220|64.233.173.221|64.233.173.222|64.233.173.223|64.233.173.224|64.233.173.225|64.233.173.226|64.233.173.227|64.233.173.228|64.233.173.229|64.233.173.230|64.233.173.231|64.233.173.232|64.233.173.233|64.233.173.234|64.233.173.235|64.233.173.236|64.233.173.237|64.233.173.238|64.233.173.239|64.233.173.240|64.233.173.241|64.233.173.242|64.233.173.243|64.233.173.244|64.233.173.245|64.233.173.246|64.233.173.247|64.233.173.248|64.233.173.249|64.233.173.250|64.233.173.251|64.233.173.252|64.233.173.253|64.233.173.254|64.233.173.255|64.68.80|64.68.81|64.68.82|64.68.83|64.68.84|64.68.85|64.68.86|64.68.87|64.68.88|64.68.89|64.68.90.1|64.68.90.10|64.68.90.11|64.68.90.12|64.68.90.129|64.68.90.13|64.68.90.130|64.68.90.131|64.68.90.132|64.68.90.133|64.68.90.134|64.68.90.135|64.68.90.136|64.68.90.137|64.68.90.138|64.68.90.139|64.68.90.14|64.68.90.140|64.68.90.141|64.68.90.142|64.68.90.143|64.68.90.144|64.68.90.145|64.68.90.146|64.68.90.147|64.68.90.148|64.68.90.149|64.68.90.15|64.68.90.150|64.68.90.151|64.68.90.152|64.68.90.153|64.68.90.154|64.68.90.155|64.68.90.156|64.68.90.157|64.68.90.158|64.68.90.159|64.68.90.16|64.68.90.160|64.68.90.161|64.68.90.162|64.68.90.163|64.68.90.164|64.68.90.165|64.68.90.166|64.68.90.167|64.68.90.168|64.68.90.169|64.68.90.17|64.68.90.170|64.68.90.171|64.68.90.172|64.68.90.17|64.68.90.174|64.68.90.175|64.68.90.176|64.68.90.177|64.68.90.178|64.68.90.179|64.68.90.18|64.68.90.180|64.68.90.181|64.68.90.182|64.68.90.183|64.68.90.184|64.68.90.185|64.68.90.186|64.68.90.187|64.68.90.188|64.68.90.189|64.68.90.19|64.68.90.190|64.68.90.191|64.68.90.192|64.68.90.193|64.68.90.194|64.68.90.195|64.68.90.196|64.68.90.197|64.68.90.198|64.68.90.199|64.68.90.2|64.68.90.20|64.68.90.200|64.68.90.201|64.68.90.202|64.68.90.203|64.68.90.204|64.68.90.205|64.68.90.206|64.68.90.207|64.68.90.208|64.68.90.21|64.68.90.22|64.68.90.23|64.68.90.24|64.68.90.25|64.68.90.26|64.68.90.27|64.68.90.28|64.68.90.29|64.68.90.3|64.68.90.30|64.68.90.31|64.68.90.32|64.68.90.33|64.68.90.34|64.68.90.35|64.68.90.36|64.68.90.37|64.68.90.38|64.68.90.39|64.68.90.4|64.68.90.40|64.68.90.41|64.68.90.42|64.68.90.43|64.68.90.44|64.68.90.45|64.68.90.46|64.68.90.47|64.68.90.48|64.68.90.49|64.68.90.5|64.68.90.50|64.68.90.51|64.68.90.52|64.68.90.53|64.68.90.54|64.68.90.55|64.68.90.56|64.68.90.57|64.68.90.58|64.68.90.59|64.68.90.6|64.68.90.60|64.68.90.61|64.68.90.62|64.68.90.63|64.68.90.64|64.68.90.65|64.68.90.66|64.68.90.67|64.68.90.68|64.68.90.69|64.68.90.7|64.68.90.70|64.68.90.71|64.68.90.72|64.68.90.73|64.68.90.74|64.68.90.75|64.68.90.76|64.68.90.77|64.68.90.78|64.68.90.79|64.68.90.8|64.68.90.80|64.68.90.9|64.68.91|64.68.92|66.249.64|66.249.65|66.249.66|66.249.67|66.249.68|66.249.69|66.249.70|66.249.71|66.249.72|66.249.78|66.249.79' ),
);
for ( $row = 0; $row < sizeof($bots_data); $row++ )
{
	for ( $column = 0; $column < 1; $column++ )
	{
		$sql = "INSERT INTO " . $table_prefix . "bots (`bot_name`, `bot_agent`, `bot_ip`, `bot_style`) VALUES ('" . $bots_data[$row]['NAME'] . "', '" . $bots_data[$row]['AGENT'] . "', '" . $bots_data[$row]['IP'] . "', '" . $board_config['default_style'] . "')";
		_sql($sql, $errored, $error_ary);
	}
}

// phpbb_medal_cat data
$sql = "INSERT INTO " . $table_prefix . "medal_cat (`cat_title`, `cat_order`) VALUES ('Default', '10')";
_sql($sql, $errored, $error_ary);

// Move phpbb_stats_config data to phpbb_config, and rename all fields with stat_ prefix
$sql = "UPDATE " . $table_prefix . "stats_config SET `config_name` = 'stat_install_date' WHERE `config_name` = 'install_date'";
_sql($sql, $errored, $error_ary);

$sql = "UPDATE " . $table_prefix . "stats_config SET `config_name` = 'stat_page_views' WHERE `config_name` = 'page_views'";
_sql($sql, $errored, $error_ary);

$sql = "UPDATE " . $table_prefix . "stats_config SET `config_name` = 'stat_return_limit' WHERE `config_name` = 'return_limit'";
_sql($sql, $errored, $error_ary);

$sql = 'DELETE FROM ' . $table_prefix . 'stats_config WHERE `config_name` = "version"';
_sql($sql, $errored, $error_ary);
			
$sql = "INSERT INTO " . $table_prefix . "config SELECT * FROM " . $table_prefix . "stats_config";
_sql($sql, $errored, $error_ary);

$sql = 'DROP TABLE IF EXISTS '. $table_prefix .'stats_config';
_sql($sql, $errored, $error_ary);

$sql = 'ALTER TABLE '. $table_prefix .'modules MODIFY COLUMN `short_name` VARCHAR(100) DEFAULT NULL';
_sql($sql, $errored, $error_ary);

$sql = 'ALTER TABLE '. $table_prefix .'module_info MODIFY COLUMN `extra_info` LONGTEXT DEFAULT "" NOT NULL';
_sql($sql, $errored, $error_ary);

// phpbb_stats_config data
$stats_config_data = array( 
	'stat_index' => 0,
	'stat_all_or_one' => 0
);
while ( list ( $config_name, $config_value ) = each ( $stats_config_data ) )
{
	$sql = "INSERT INTO " . $table_prefix . "config (`config_name`, `config_value`) 
		VALUES ('" . $config_name . "', '" . $config_value . "')";
	_sql($sql, $errored, $error_ary);
}		


//
// Change default values to sync with FullyModded setup
//
$sql = 'UPDATE ' . $table_prefix . 'album_config 
	SET `config_value` = ".0.56a" 
	WHERE `config_name` = "album_version"';
_sql($sql, $errored, $error_ary);

$sql = 'TRUNCATE TABLE ' . $table_prefix . 'forums_descrip';
_sql($sql, $errored, $error_ary);

$sql = 'TRUNCATE TABLE ' . $table_prefix . 'banner_stats';
_sql($sql, $errored, $error_ary);

$sql = 'DELETE FROM ' . $table_prefix . 'pages WHERE `page_name` = "pointscp.php"';
_sql($sql, $errored, $error_ary);

$sql = 'DELETE FROM ' . $table_prefix . 'pages WHERE `page_name` = "modcp.php"';
_sql($sql, $errored, $error_ary);

$sql = 'INSERT INTO ' . $table_prefix . 'pages (`page_name`, `page_key`) VALUES ("medals.php", "medals.php")';
_sql($sql, $errored, $error_ary);


//
// Add group_order to existing groups
//
$sql = "SELECT `group_id`
	FROM " . $table_prefix. "groups
	WHERE `group_single_user` = 0
	ORDER BY group_id";
$result = _sql($sql, $errored, $error_ary, '');
	
$groups = $db->sql_fetchrowset($result);
$total_groups = sizeof($groups);

for($i = 0; $i < $total_groups; $i++)
{
	$group_id = $groups[$i]['group_id'];

	$sql = "UPDATE " . $table_prefix . "groups
		SET `group_rank_order` = " . ($i + 1) . " 
		WHERE `group_id` = " . $group_id;
	_sql($sql, $errored, $error_ary);
}
$db->sql_freeresult($result);
	
?>